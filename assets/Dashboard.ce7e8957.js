var he=Object.defineProperty;var be=(e,t,n)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Q=(e,t,n)=>(be(e,typeof t!="symbol"?t+"":t,n),n);import{r as _,b as W,c as me,R as D,j as k,d as te,F as _e}from"./vendor.da540a26.js";import{K as Y}from"./konva.1335705c.js";import{u as xe}from"./ahooks.3aed1a73.js";import{_ as we,i as Ce,a as Re}from"./common.a115089c.js";import{s as P,B as se,r as ke,c as b,_ as y,a as I,b as V,d as $e,u as M,e as U,f as F,g as J,h as Te,i as le,j as ne,k as X,l as Be,m as Ie,n as ze,o as Ee,t as oe,p as Pe,q as R,v as Ae,w as Le}from"./@mui/material.4782ca5a.js";const Z=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),We=Z?Promise.resolve().then(function(){return Me}):Promise.resolve().then(function(){return Ge});async function Fe(...e){return(await We).default(...e)}Z?Promise.resolve().then(function(){return Ne}):Promise.resolve().then(function(){return qe});Z?Promise.resolve().then(function(){return Ve}):Promise.resolve().then(function(){return Je});const Oe=async e=>{const t=await e.getFile();return t.handle=e,t};var je=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((a,r)=>{t[r]={description:a.description||"Files",accept:{}},a.mimeTypes?a.mimeTypes.map(i=>{t[r].accept[i]=a.extensions||[]}):t[r].accept["*/*"]=a.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),o=await Promise.all(n.map(Oe));return e[0].multiple?o:o[0]},Me={__proto__:null,default:je};function G(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var o=n.done;return Promise.resolve(n.value).then(function(a){return{value:a,done:o}})}return G=function(n){this.s=n,this.n=n.next},G.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var o=this.s.return;return o===void 0?Promise.resolve({value:n,done:!0}):t(o.apply(this.s,arguments))},throw:function(n){var o=this.s.return;return o===void 0?Promise.reject(n):t(o.apply(this.s,arguments))}},new G(e)}const ce=async(e,t,n=e.name,o)=>{const a=[],r=[];var i,c=!1,s=!1;try{for(var l,d=function(u){var g,p,h,m=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,h=Symbol.iterator);m--;){if(p&&(g=u[p])!=null)return g.call(u);if(h&&(g=u[h])!=null)return new G(g.call(u));p="@@asyncIterator",h="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());c=!(l=await d.next()).done;c=!1){const u=l.value,g=`${n}/${u.name}`;u.kind==="file"?r.push(u.getFile().then(p=>(p.directoryHandle=e,p.handle=u,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>g})))):u.kind!=="directory"||!t||o&&o(u)||a.push(ce(u,t,g,o))}}catch(u){s=!0,i=u}finally{try{c&&d.return!=null&&await d.return()}finally{if(s)throw i}}return[...(await Promise.all(a)).flat(),...await Promise.all(r)]};var Ue=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return ce(t,e.recursive,void 0,e.skipDirectory)},Ne={__proto__:null,default:Ue},Se=async(e,t=[{}],n=null,o=!1,a=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const r=[];let i=null;if(e instanceof Blob&&e.type?i=e.type:e.headers&&e.headers.get("content-type")&&(i=e.headers.get("content-type")),t.forEach((l,d)=>{r[d]={description:l.description||"Files",accept:{}},l.mimeTypes?(d===0&&i&&l.mimeTypes.push(i),l.mimeTypes.map(u=>{r[d].accept[u]=l.extensions||[]})):i?r[d].accept[i]=l.extensions||[]:r[d].accept["*/*"]=l.extensions||[]}),n)try{await n.getFile()}catch(l){if(n=null,o)throw l}const c=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:r,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&a&&a(c);const s=await c.createWritable();return"stream"in e?(await e.stream().pipeTo(s),c):"body"in e?(await e.body.pipeTo(s),c):(await s.write(await e),await s.close(),c)},Ve={__proto__:null,default:Se},De=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const o=document.createElement("input");o.type="file";const a=[...e.map(s=>s.mimeTypes||[]),...e.map(s=>s.extensions||[])].join();o.multiple=e[0].multiple||!1,o.accept=a||"",o.style.display="none",document.body.append(o);const r=s=>{typeof i=="function"&&i(),t(s)},i=e[0].legacySetup&&e[0].legacySetup(r,()=>i(n),o),c=()=>{window.removeEventListener("focus",c),o.remove()};o.addEventListener("click",()=>{window.addEventListener("focus",c)}),o.addEventListener("change",()=>{window.removeEventListener("focus",c),o.remove(),r(o.multiple?Array.from(o.files):o.files[0])}),"showPicker"in HTMLInputElement.prototype?o.showPicker():o.click()})),Ge={__proto__:null,default:De},He=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const o=document.createElement("input");o.type="file",o.webkitdirectory=!0;const a=i=>{typeof r=="function"&&r(),t(i)},r=e[0].legacySetup&&e[0].legacySetup(a,()=>r(n),o);o.addEventListener("change",()=>{let i=Array.from(o.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(i=i.filter(c=>c.webkitRelativePath.split("/").every(s=>!e[0].skipDirectory({name:s,kind:"directory"})))):i=i.filter(c=>c.webkitRelativePath.split("/").length===2),a(i)}),"showPicker"in HTMLInputElement.prototype?o.showPicker():o.click()})),qe={__proto__:null,default:He},Ke=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let o=e;"body"in e&&(o=await async function(i,c){const s=i.getReader(),l=new ReadableStream({start:g=>async function p(){return s.read().then(({done:h,value:m})=>{if(!h)return g.enqueue(m),p();g.close()})}()}),d=new Response(l),u=await d.blob();return s.releaseLock(),new Blob([u],{type:c})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await o);const a=()=>{typeof r=="function"&&r()},r=t.legacySetup&&t.legacySetup(a,()=>r(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),a()}),n.click(),null},Je={__proto__:null,default:Ke};const Qe={name:"1qk07wn",styles:"text-align:center;margin:0;padding:0.5em"},Xe={name:"zl1inp",styles:"display:flex;justify-content:center"},Ye={name:"1mjnbiv",styles:"width:70vmin;height:70vmin;display:block;flex:none;overflow:auto"},Ze={name:"15l7spb",styles:"width:100%;height:100%;display:block;background-color:#f2f2f2;flex:none"};var et=we,tt=Ce,nt=Re,ot="[object String]";function rt(e){return typeof e=="string"||!tt(e)&&nt(e)&&et(e)==ot}var at=rt;const de={async file2image(e){const t=await this.readyFileToDataURL(e);return await this.createImage(t)},readyFileToDataURL(e){return new Promise((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result),o.onloadend=null,o.onerror=null},o.onerror=a=>{n(a),o.onloadend=null,o.onerror=null},o.readAsDataURL(e)})},createImage(e){return new Promise((t,n)=>{const o=new Image;o.onload=()=>{t(o),o.onload=null,o.onerror=null},o.onerror=a=>{n(a),o.onload=null,o.onerror=null},o.src=e})},async scaleImage2Rect(e,t,n){at(e)&&(e=await this.createImage(e));const{width:o,height:a}=e,r=Math.min(t/o,n/a);return t=o*r,n=a*r,{width:t,height:n}}},L=class{constructor(){Q(this,"Stage",null)}static getInstance(){return L.instance||(L.instance=new L),L.instance}setStage(t){return this.Stage=t,this}setLayer(){const{Stage:t}=this;if(!t)throw new Error("Stage is null.your should setStage first");t.getLayers().find(o=>o.name()==="image")?console.warn("layer is exist.No need to set again"):t.add(new Y.Layer({name:"image"}))}async drawImage(t){const{Stage:n}=this;if(!n)throw new Error("Stage is null.your should setStage first");const o=n.getLayers().find(u=>u.name()==="image");if(!o)throw new Error("layer is null.your should setLayer first");o.removeChildren();const a=n.width(),r=n.height(),{width:i,height:c}=await de.scaleImage2Rect(t,a,r),s=Math.floor((r-c)/2),l=Math.floor((a-i)/2),d=new Y.Image({image:t,width:i,height:c,y:s,x:l});return o.add(d),d}};let O=L;Q(O,"instance");const it=_.exports.createContext({}),st=it,lt=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],ct=e=>{const{color:t,disableElevation:n,fullWidth:o,size:a,variant:r,classes:i}=e,c={root:["root",r,`${r}${b(t)}`,`size${b(a)}`,`${r}Size${b(a)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${b(a)}`],endIcon:["endIcon",`iconSize${b(a)}`]},s=J(c,Te,i);return y({},i,s)},ue=e=>y({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),dt=P(se,{shouldForwardProp:e=>ke(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${b(n.color)}`],t[`size${b(n.size)}`],t[`${n.variant}Size${b(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,o;return y({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":y({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:I(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:I(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:I(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:(e.vars||e).palette.grey.A100,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":y({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${V.focusVisible}`]:y({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${V.disabled}`]:y({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="outlined"&&t.color==="secondary"&&{border:`1px solid ${(e.vars||e).palette.action.disabled}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${I(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(o=e.palette).getContrastText)==null?void 0:n.call(o,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${V.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${V.disabled}`]:{boxShadow:"none"}}),ut=P("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${b(n.size)}`]]}})(({ownerState:e})=>y({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},ue(e))),pt=P("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${b(n.size)}`]]}})(({ownerState:e})=>y({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},ue(e))),ft=_.exports.forwardRef(function(t,n){const o=_.exports.useContext(st),a=$e(o,t),r=M({props:a,name:"MuiButton"}),{children:i,color:c="primary",component:s="button",className:l,disabled:d=!1,disableElevation:u=!1,disableFocusRipple:g=!1,endIcon:p,focusVisibleClassName:h,fullWidth:m=!1,size:C="medium",startIcon:T,type:A,variant:v="text"}=r,B=U(r,lt),z=y({},r,{color:c,component:s,disabled:d,disableElevation:u,disableFocusRipple:g,fullWidth:m,size:C,type:A,variant:v}),w=ct(z),ye=T&&W(ut,{className:w.startIcon,ownerState:z,children:T}),ve=p&&W(pt,{className:w.endIcon,ownerState:z,children:p});return me(dt,y({ownerState:z,className:F(o.className,w.root,l),component:s,disabled:d,focusRipple:!g,focusVisibleClassName:F(w.focusVisible,h),ref:n,type:A},B,{classes:w,children:[ye,i,ve]}))}),gt=ft,yt=["component","direction","spacing","divider","children"];function vt(e,t){const n=_.exports.Children.toArray(e).filter(Boolean);return n.reduce((o,a,r)=>(o.push(a),r<n.length-1&&o.push(_.exports.cloneElement(t,{key:`separator-${r}`})),o),[])}const ht=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],bt=({ownerState:e,theme:t})=>{let n=y({display:"flex",flexDirection:"column"},ne({theme:t},X({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=Be(t),a=Object.keys(t.breakpoints.values).reduce((s,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(s[l]=!0),s),{}),r=X({values:e.direction,base:a}),i=X({values:e.spacing,base:a});typeof r=="object"&&Object.keys(r).forEach((s,l,d)=>{if(!r[s]){const g=l>0?r[d[l-1]]:"column";r[s]=g}}),n=Ie(n,ne({theme:t},i,(s,l)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${ht(l?r[l]:e.direction)}`]:Ee(o,s)}})))}return n=ze(t.breakpoints,n),n},mt=P("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})(bt),_t=_.exports.forwardRef(function(t,n){const o=M({props:t,name:"MuiStack"}),a=le(o),{component:r="div",direction:i="column",spacing:c=0,divider:s,children:l}=a,d=U(a,yt);return W(mt,y({as:r,ownerState:{direction:i,spacing:c},ref:n},d,{children:s?vt(l,s):l}))}),xt=_t,wt=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Ct=e=>{const{classes:t,fullWidth:n,selected:o,disabled:a,size:r,color:i}=e,c={root:["root",o&&"selected",a&&"disabled",n&&"fullWidth",`size${b(r)}`,i]};return J(c,Pe,t)},Rt=P(se,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${b(n.size)}`]]}})(({theme:e,ownerState:t})=>{let n=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,o;return e.vars&&(n=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,o=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),y({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${oe.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:I(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${oe.selected}`]:{color:n,backgroundColor:e.vars?`rgba(${o} / ${e.vars.palette.action.selectedOpacity})`:I(n,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${o} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:I(n,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${o} / ${e.vars.palette.action.selectedOpacity})`:I(n,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),kt=_.exports.forwardRef(function(t,n){const o=M({props:t,name:"MuiToggleButton"}),{children:a,className:r,color:i="standard",disabled:c=!1,disableFocusRipple:s=!1,fullWidth:l=!1,onChange:d,onClick:u,selected:g,size:p="medium",value:h}=o,m=U(o,wt),C=y({},o,{color:i,disabled:c,disableFocusRipple:s,fullWidth:l,size:p}),T=Ct(C),A=v=>{u&&(u(v,h),v.defaultPrevented)||d&&d(v,h)};return W(Rt,y({className:F(T.root,r),disabled:c,focusRipple:!s,ref:n,onClick:A,onChange:d,value:h,ownerState:C,"aria-pressed":g},m,{children:a}))}),$t=kt;function Tt(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}const Bt=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],It=e=>{const{classes:t,orientation:n,fullWidth:o,disabled:a}=e,r={root:["root",n==="vertical"&&"vertical",o&&"fullWidth"],grouped:["grouped",`grouped${b(n)}`,a&&"disabled"]};return J(r,Ae,t)},zt=P("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${R.grouped}`]:t.grouped},{[`& .${R.grouped}`]:t[`grouped${b(n.orientation)}`]},t.root,n.orientation==="vertical"&&t.vertical,n.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>y({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${R.grouped}`]:y({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${R.selected} + .${R.grouped}.${R.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${R.selected} + .${R.grouped}.${R.selected}`]:{borderTop:0,marginTop:0}})})),Et=_.exports.forwardRef(function(t,n){const o=M({props:t,name:"MuiToggleButtonGroup"}),{children:a,className:r,color:i="standard",disabled:c=!1,exclusive:s=!1,fullWidth:l=!1,onChange:d,orientation:u="horizontal",size:g="medium",value:p}=o,h=U(o,Bt),m=y({},o,{disabled:c,fullWidth:l,orientation:u,size:g}),C=It(m),T=(v,B)=>{if(!d)return;const z=p&&p.indexOf(B);let w;p&&z>=0?(w=p.slice(),w.splice(z,1)):w=p?p.concat(B):[B],d(v,w)},A=(v,B)=>{!d||d(v,p===B?null:B)};return W(zt,y({role:"group",className:F(C.root,r),ref:n,ownerState:m},h,{children:_.exports.Children.map(a,v=>_.exports.isValidElement(v)?_.exports.cloneElement(v,{className:F(C.grouped,v.props.className),onChange:s?A:T,selected:v.props.selected===void 0?Tt(v.props.value,p):v.props.selected,size:v.props.size||g,fullWidth:l,color:v.props.color||i,disabled:v.props.disabled||c}):null)}))}),Pt=Et,At=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Lt=e=>{const{align:t,gutterBottom:n,noWrap:o,paragraph:a,variant:r,classes:i}=e,c={root:["root",r,e.align!=="inherit"&&`align${b(t)}`,n&&"gutterBottom",o&&"noWrap",a&&"paragraph"]};return J(c,Le,i)},Wt=P("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${b(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>y({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),re={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ft={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Ot=e=>Ft[e]||e,jt=_.exports.forwardRef(function(t,n){const o=M({props:t,name:"MuiTypography"}),a=Ot(o.color),r=le(y({},o,{color:a})),{align:i="inherit",className:c,component:s,gutterBottom:l=!1,noWrap:d=!1,paragraph:u=!1,variant:g="body1",variantMapping:p=re}=r,h=U(r,At),m=y({},r,{align:i,color:a,className:c,component:s,gutterBottom:l,noWrap:d,paragraph:u,variant:g,variantMapping:p}),C=s||(u?"p":p[g]||re[g])||"span",T=Lt(m);return W(Wt,y({as:C,ref:n,ownerState:m,className:F(T.root,c)},h))}),Mt=jt,Ut=e=>{const{data:t,value:n,disabled:o,onChange:a}=e,r=i=>a&&a(i);return k(Pt,{disabled:o,value:n,orientation:"vertical",color:"primary",exclusive:!0,sx:{marginRight:1,flex:"none"},children:t.map((i,c)=>{const{value:s,title:l}=i;return k($t,{value:s,onClick:()=>r(s),children:k(Mt,{children:l})},c)})})},Nt=D.memo(Ut);let f;const $=new Array(32).fill(void 0);$.push(void 0,null,!0,!1);function H(e){return $[e]}let j=$.length;function St(e){e<36||($[e]=j,j=e)}function Vt(e){const t=H(e);return St(e),t}const pe=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});pe.decode();let q=new Uint8Array;function ee(){return q.byteLength===0&&(q=new Uint8Array(f.memory.buffer)),q}function Dt(e,t){return pe.decode(ee().subarray(e,e+t))}function N(e){j===$.length&&$.push($.length+1);const t=j;return j=$[t],$[t]=e,t}let K=new Int32Array;function x(){return K.byteLength===0&&(K=new Int32Array(f.memory.buffer)),K}function S(e,t){return ee().subarray(e/1,e/1+t)}function Gt(e){try{const a=f.__wbindgen_add_to_stack_pointer(-16);f.grayscale(a,N(e));var t=x()[a/4+0],n=x()[a/4+1],o=S(t,n).slice();return f.__wbindgen_free(t,n*1),o}finally{f.__wbindgen_add_to_stack_pointer(16)}}function Ht(e,t){try{const r=f.__wbindgen_add_to_stack_pointer(-16);f.threshold(r,N(e),t);var n=x()[r/4+0],o=x()[r/4+1],a=S(n,o).slice();return f.__wbindgen_free(n,o*1),a}finally{f.__wbindgen_add_to_stack_pointer(16)}}function qt(e,t,n){try{const i=f.__wbindgen_add_to_stack_pointer(-16);f.to_canny(i,N(e),t,n);var o=x()[i/4+0],a=x()[i/4+1],r=S(o,a).slice();return f.__wbindgen_free(o,a*1),r}finally{f.__wbindgen_add_to_stack_pointer(16)}}function Kt(e,t){try{const r=f.__wbindgen_add_to_stack_pointer(-16);f.painting(r,N(e),t);var n=x()[r/4+0],o=x()[r/4+1],a=S(n,o).slice();return f.__wbindgen_free(n,o*1),a}finally{f.__wbindgen_add_to_stack_pointer(16)}}function ae(e,t,n){try{const i=f.__wbindgen_add_to_stack_pointer(-16);f.flip(i,N(e),t,n);var o=x()[i/4+0],a=x()[i/4+1],r=S(o,a).slice();return f.__wbindgen_free(o,a*1),r}finally{f.__wbindgen_add_to_stack_pointer(16)}}let fe=0;function Jt(e,t){const n=t(e.length*1);return ee().set(e,n/1),fe=e.length,n}async function Qt(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function Xt(){const e={};return e.wbg={},e.wbg.__wbindgen_object_drop_ref=function(t){Vt(t)},e.wbg.__wbg_width_6e17ed358e109a2f=function(t){return H(t).width},e.wbg.__wbg_height_3948020edf838414=function(t){return H(t).height},e.wbg.__wbg_data_f13601b88960b7eb=function(t,n){const o=H(n).data,a=Jt(o,f.__wbindgen_malloc),r=fe;x()[t/4+1]=r,x()[t/4+0]=a},e.wbg.__wbindgen_throw=function(t,n){throw new Error(Dt(t,n))},e}function Yt(e,t){return f=e.exports,ge.__wbindgen_wasm_module=t,K=new Int32Array,q=new Uint8Array,f}async function ge(e){typeof e>"u"&&(e=new URL(""+new URL("image_bg.9829ca5f.wasm",import.meta.url).href,self.location));const t=Xt();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:o}=await Qt(await e,t);return Yt(n,o)}const E={is_init:!1,async init(){return this.is_init||(await ge(),this.is_init=!0),this},Grayscale:e=>e.data.set(Gt(e)),Threshold:e=>e.data.set(Ht(e,128)),Canny:e=>e.data.set(qt(e,30,300)),Painting:e=>e.data.set(Kt(e,25)),flipVertical:e=>e.data.set(ae(e,!1,!0)),flipHorizontal:e=>e.data.set(ae(e,!0,!1))},ie=[{title:"\u7070\u5EA6",value:1,handle:E.Grayscale},{title:"\u9ED1\u767D",value:2,handle:E.Threshold},{title:"Canny",value:3,handle:E.Canny},{title:"\u7ED8\u753B",value:4,handle:E.Painting},{title:"\u5782\u76F4\u7FFB\u8F6C",value:5,handle:E.flipVertical},{title:"\u6C34\u5E73\u7FFB\u8F6C",value:6,handle:E.flipHorizontal}];function an(){const e=D.createRef(),[t,n]=D.useState(),[o,a]=D.useState(-1);xe(()=>{const{current:s}=e;if(!s)throw new Error("Container.current is null");const l=new Y.Stage({container:s,width:s.scrollWidth,height:s.scrollHeight});O.getInstance().setStage(l).setLayer()});const r=async()=>{const s=await Fe({extensions:[".png",".jpg",".jpeg",".gif",".bmp"],description:"\u56FE\u7247\u6587\u4EF6"}),l=await de.file2image(s),d=await O.getInstance().drawImage(l);n(d),c(o,d)},i=s=>{s!==o&&(a(s),t&&c(s,t))},c=async(s,l)=>{await E.init();const d=ie.find(u=>u.value===s);d&&(l==null||l.cache(),l==null||l.filters([d.handle]))};return te(_e,{children:[k("h1",{css:Qe,children:"Konva\u7ED3\u5408rust\u65B0\u589E\u56FE\u7247\u6EE4\u955C\u6548\u679C"}),k(xt,{sx:{justifyContent:"center",paddingBottom:2},direction:"row",spacing:2,children:k(gt,{variant:"contained",onClick:()=>r(),children:"\u9009\u62E9\u6587\u4EF6"})}),te("div",{css:Xe,children:[k(Nt,{value:o,data:ie,disabled:!t,onChange:i}),k("div",{css:Ye,children:k("div",{ref:e,css:Ze})})]})]})}export{an as default};
